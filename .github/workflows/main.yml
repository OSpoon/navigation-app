# workflowåç§°
name: Build and Deploy
# è§¦å‘æ¡ä»¶:masteråˆ†æ”¯æ¥æ”¶åˆ°pushæŒ‡ä»¤åå¼€å§‹
on:
  push:
    branches:
      - master
# æ‰§è¡Œä»»åŠ¡
jobs:
  build-and-deploy:
    name: Build and Deploy
    # runs-on è™šæ‹Ÿæœºç¯å¢ƒ
    runs-on: ubuntu-latest
    # ä»»åŠ¡æ­¥éª¤
    steps:
      # è·å–æºç 
      - name: 1. æ‹‰å–ä»£ç  ğŸš€
        # ä½¿â½¤actionåº“ actions/checkoutè·å–æºç 
        uses: actions/checkout@master
      # å®‰è£…Node12.18.3
      - name: 2. å®‰è£…Node ğŸš€
        # ä½¿â½¤actionåº“ actions/setup-nodeå®‰è£…node
        uses: actions/setup-node@v1
        with:
          node-version: 12.18.3
      # å®‰è£…ä¾èµ–
      - name: 3. å®‰è£…ä¾èµ– ğŸš€
        run: npm install yarn && yarn install
      # ç¼–è¯‘é¡¹ç›®
      - name: 4. ç¼–è¯‘é¡¹ç›® ğŸš€
        run: yarn run build
      - name: 5. éƒ¨ç½² ğŸš€
        # ä½¿ç”¨JamesIvesåº“ JamesIves/github-pages-deploy-action@3.7.1
        uses: JamesIves/github-pages-deploy-action@3.7.1
        with:
          # GitHub å¯†é’¥
          GITHUB_TOKEN: ${{ secrets.PRIVATE_KEY }}
          # å¾…å‘å¸ƒåˆ°çš„åˆ†æ”¯
          BRANCH: gh-pages
          # å¾…éƒ¨ç½²æ–‡ä»¶å¤¹
          FOLDER: dist
          # è‡ªåŠ¨åˆ é™¤å·²éƒ¨ç½²çš„æ–‡ä»¶
          CLEAN: true
